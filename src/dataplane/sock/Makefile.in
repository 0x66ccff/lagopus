TOPDIR		= @TOPDIR@
MKRULESDIR	= @MKRULESDIR@

TARGET_EXE = ofswitch

STANDALONE=yes
OFPROTODIR=../ofproto
include $(OFPROTODIR)/Makefile.inc

SRCS = sock.c $(OFPROTOSRCS)

TARGETS = $(TARGET_EXE)

include $(MKRULESDIR)/vars.mk
include $(MKRULESDIR)/rules.mk
include .depend

$(OFPROTOSRCS): %.c: $(OFPROTODIR)/%.c
	ln -s $< $@

clean::
	$(RM) -f $(OFPROTOSRCS)

GPROFFLAGS = -pg
#OPENMPFLAGS= -fopenmp

CPPFLAGS += -g
CPPFLAGS += $(GPROFFLAGS)
CPPFLAGS += $(OPENMPFLAGS)
CPPFLAGS += -I$(BUILD_SRCDIR)/agent
CPPFLAGS += -I$(PWD) -I$(OFPROTODIR)
LDFLAGS += $(GPROFFLAGS) $(OPENMPFLAGS)

DEP_LIBS+=$(DEP_LAGOPUS_AGENT_LIB)
DEP_LIBS+=$(DEP_LAGOPUS_CONFIG_LIB)
DEP_LIBS+=$(DEP_LAGOPUS_UTIL_LIB)
