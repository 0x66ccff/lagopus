use:
  - lagopus

setup:
  - repetition_count: 1
    cmds:
      - cmd_type: ds
        cmd: log -debuglevel 10000
        result: '{"ret": "OK"}'
      - cmd_type: ds
        cmd: destroy-all-obj
        result: '{"ret": "OK"}'

teardown:
  - repetition_count: 1
    cmds:
      - cmd_type: ds
        cmd: destroy-all-obj
        result: '{"ret": "OK"}'

testcases:
  - testcase: add, delete
    test:
      - repetition_count: 1
        cmds:
          - cmd_type: ds
            cmd: namespace add ns01
            result: '{"ret": "OK"}'
          - cmd_type: ds
            cmd: namespace add ns02
            result: '{"ret": "OK"}'
          - cmd_type: ds
            cmd: namespace add ns03
            result: '{"ret": "OK"}'
          - cmd_type: ds
            cmd: namespace
            result: |-
              {"ret":"OK",
              "current":"", "all":["ns03", "ns01", "ns02"]}
          - cmd_type: ds
            cmd: namespace delete ns01
            result: '{"ret": "OK"}'
          - cmd_type: ds
            cmd: namespace delete ns02
            result: '{"ret": "OK"}'
          - cmd_type: ds
            cmd: namespace delete ns03
            result: '{"ret": "OK"}'

  - testcase: set, unset
    test:
      - repetition_count: 1
        cmds:
          - cmd_type: ds
            cmd: namespace add ns01
            result: '{"ret": "OK"}'
          - cmd_type: ds
            cmd: namespace add ns02
            result: '{"ret": "OK"}'
          - cmd_type: ds
            cmd: namespace
            result: |-
              {"ret":"OK",
              "current":"", "all":["ns01", "ns02"]}
          - cmd_type: ds
            cmd: namespace set ns01
            result: '{"ret": "OK"}'
          - cmd_type: ds
            cmd: namespace
            result: |-
              {"ret":"OK",
              "current":"ns01", "all":["ns01", "ns02"]}
          - cmd_type: ds
            cmd: namespace set ns02
            result: '{"ret": "OK"}'
          - cmd_type: ds
            cmd: namespace
            result: |-
              {"ret":"OK",
              "current":"ns02", "all":["ns01", "ns02"]}
          - cmd_type: ds
            cmd: namespace unset
            result: '{"ret": "OK"}'
          - cmd_type: ds
            cmd: namespace
            result: |-
              {"ret":"OK",
              "current":"", "all":["ns01", "ns02"]}
          - cmd_type: ds
            cmd: namespace delete ns01
            result: '{"ret": "OK"}'
          - cmd_type: ds
            cmd: namespace delete ns02
            result: '{"ret": "OK"}'

  - testcase: invalid args
    test:
      - repetition_count: 1
        cmds:
          - cmd_type: ds
            cmd: namespace invalid_opt
            result: |-
              {"ret":"INVALID_ARGS",
              "data":"Unknown option 'invalid_opt'"}
          - cmd_type: ds
            cmd: namespace add
            result: |-
              {"ret":"INVALID_ARGS",
              "data":"invalid option value."}
          - cmd_type: ds
            cmd: namespace set
            result: |-
              {"ret":"INVALID_ARGS",
              "data":"invalid option value."}
          - cmd_type: ds
            cmd: namespace unset invalid_opt
            result: |-
              {"ret":"INVALID_ARGS",
              "data":"invalid option value."}
          - cmd_type: ds
            cmd: namespace delete
            result: |-
              {"ret":"INVALID_ARGS",
              "data":"invalid option value."}

  - testcase: not found
    test:
      - repetition_count: 1
        cmds:
          - cmd_type: ds
            cmd: namespace set invalid_opt
            result: |-
              {"ret":"NOT_FOUND",
              "data":"Bad opt value = invalid_opt"}
          - cmd_type: ds
            cmd: namespace delete invalid_opt
            result: |-
              {"ret":"NOT_FOUND",
              "data":"Bad opt value = invalid_opt"}

